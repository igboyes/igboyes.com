---
import { getCollection } from "astro:content";
import { format } from "date-fns";
import Nav from "../../components/Nav.astro";
import Layout from "../../layouts/Layout.astro";

const allBlogPosts = await getCollection("blog");

const menu = allBlogPosts.map((post) => ({
  date: format(post.data.date, "MMMM dd, yyyy"),
  slug: post.slug,
  title: post.data.title,
}));
---

<Layout title="Ian Boyes">
  <main>
    <Nav />
    <header class="prose">
      <h1>Blog</h1>
    </header>
    <section class="prose">
      <ul>
        {
          menu.map(({ date, slug, title }) => (
            <li>
              <p class="font-medium mb-0 text-lg">
                <a href={`/blog/${slug}`}>{title}</a>
              </p>
              <small class="text-sm">{date}</small>
            </li>
          ))
        }
      </ul>
    </section>
  </main>
</Layout>
